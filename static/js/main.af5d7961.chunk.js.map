{"version":3,"sources":["components/shop-header/index.js","components/shop-header/shop-header.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","utils/compose.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/book-list/index.js","components/pages/home-page.js","components/pages/card-page.js","components/shopping-cart-table/shopping-cart-table.js","components/shopping-cart-table/index.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","store.js","index.js"],"names":["ShopHeader","connect","shoppingCart","total","orderTotal","numItems","itemsTotal","className","to","BookListItem","book","onAddedToCart","title","author","price","coverImage","src","alt","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","booksLoaded","newBooks","type","payload","booksError","error","bookAddedToCart","bookId","fetchBooks","dispatch","getBooks","then","data","catch","compose","funcs","comp","reduceRight","wrapped","f","Spinner","ErrorIndicator","BookList","books","map","key","id","BookListContainer","this","loading","Component","bookList","ownProps","bindActionCreators","HomePage","CardPage","mapDispatchToProps","onIncrease","onDecrease","onDelete","ShoppingCartTable","items","cartItems","item","idx","count","App","role","path","component","exact","ErrorBoundry","state","hasError","errorInfo","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","updateBookList","action","undefined","updateOrder","quantity","find","itemIndex","findIndex","newArray","index","slice","updateCartItems","updateCartItem","newTotal","reduce","previousValue","newItemsTotal","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.af5d7961.chunk.js","sourcesContent":["import ShopHeader from './shop-header';\n\nexport default ShopHeader;","import React from 'react';\nimport './shop-header.css';\nimport { Link } from 'react-router-dom';\nimport {connect} from \"react-redux\";\n\nconst ShopHeader = ({ numItems, total }) => {\n  return (\n    <header className=\"shop-header row\">\n      <Link className=\"logo text-dark\" to=\"/\">ReStore</Link>\n      <Link className=\"shopping-cart\" to=\"/cart\">\n        <i className=\"cart-icon fa fa-shopping-cart\" />\n        {numItems} items (${total})\n      </Link>\n    </header>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { orderTotal, itemsTotal } }) => {\n  return {\n    total: orderTotal,\n    numItems: itemsTotal\n  }\n};\n\nexport default connect(mapStateToProps)(ShopHeader);\n","import BookListItem from \"./book-list-item\";\r\n\r\nexport default BookListItem;\r\n","import React from \"react\";\r\nimport './book-list-item.css';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n  const { title, author, price, coverImage } = book;\r\n\r\n  return (\r\n      <div className=\"book-list-item\">\r\n        <div className=\"book-cover\">\r\n          <img src={ coverImage } alt=\"cover\"/>\r\n        </div>\r\n\r\n        <div className=\"book-details\">\r\n          <Link to=\"/\" className=\"book-title\">{ title }</Link>\r\n          <div className=\"book-author\">{ author }</div>\r\n          <div className=\"book-price\">$ { price }</div>\r\n          <button onClick={onAddedToCart} className=\"btn btn-info add-to-cart\">Add to cart</button>\r\n        </div>\r\n      </div>\r\n  )\r\n};\r\n\r\nexport default BookListItem;\r\n","import React from \"react\";\r\n\r\nconst {\r\n  Provider : BookstoreServiceProvider,\r\n  Consumer : BookstoreServiceConsumer } = React.createContext();\r\n\r\nexport {\r\n  BookstoreServiceProvider,\r\n  BookstoreServiceConsumer\r\n};\r\n","import React from \"react\";\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n  return (props) => {\r\n    return (\r\n        <BookstoreServiceConsumer>\r\n          {\r\n            (bookstoreService) => {\r\n              return (\r\n                  <Wrapped {...props} bookstoreService={ bookstoreService }/>\r\n              )\r\n            }\r\n          }\r\n        </BookstoreServiceConsumer>\r\n    )\r\n  }\r\n};\r\n\r\nexport default withBookstoreService;\r\n","\r\nconst booksLoaded = (newBooks) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_SUCCESS',\r\n    payload: newBooks\r\n  }\r\n};\r\n\r\nconst booksRequested = () => {\r\n  return {\r\n    type: 'FETCH_BOOKS_REQUEST'\r\n  }\r\n};\r\n\r\nconst booksError = (error) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_FAILURE',\r\n    payload: error\r\n  }\r\n};\r\n\r\nconst bookAddedToCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_ADDED_TO_CART',\r\n    payload: bookId\r\n  }\r\n};\r\n\r\nconst bookRemoveFromCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_REMOVED_FROM_CAT',\r\n    payload: bookId\r\n  }\r\n};\r\n\r\nconst AllBooksRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n    payload: bookId\r\n  }\r\n};\r\n\r\nconst fetchBooksOld = (bookstoreService, dispatch) => () => {\r\n  dispatch(booksRequested());\r\n  bookstoreService.getBooks()\r\n      .then(data => dispatch(booksLoaded(data)))\r\n      .catch(error => dispatch(booksError(error)));\r\n};\r\n\r\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\r\n  dispatch(booksRequested());\r\n  bookstoreService.getBooks()\r\n      .then(data => dispatch(booksLoaded(data)))\r\n      .catch(error => dispatch(booksError(error)));\r\n};\r\n\r\nexport {\r\n  fetchBooks,\r\n  bookAddedToCart,\r\n  bookRemoveFromCart,\r\n  AllBooksRemovedFromCart\r\n};\r\n\r\n","\r\nconst compose = (...funcs) => (comp) => {\r\n  return funcs.reduceRight(\r\n      (wrapped, f) => f(wrapped), comp)\r\n};\r\n\r\nexport default compose;\r\n","\r\nimport Spinner from \"./spinner\";\r\n\r\nexport default Spinner;\r\n","import React from \"react\";\r\n\r\nimport './spinner.css';\r\n\r\nconst Spinner = () => {\r\n  return (\r\n      <div className=\"loadingio-spinner-spinner-8z3ltybmha3\">\r\n        <div className=\"ldio-m4va34tz4p\">\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n  )\r\n};\r\n\r\nexport default Spinner;\r\n","import React from \"react\";\r\n\r\nimport './error-indicator.css';\r\n\r\nconst ErrorIndicator = () => {\r\n  return (\r\n      <div className=\"error-indicator\">\r\n        <p>Error!</p>\r\n      </div>\r\n  )\r\n};\r\n\r\nexport default ErrorIndicator;\r\n","import React, { Component } from \"react\";\r\nimport BookListItem from \"../book-list-item\";\r\nimport { connect } from 'react-redux';\r\nimport { withBookstoreService } from '../hoc';\r\nimport { fetchBooks, bookAddedToCart } from \"../../actions\";\r\nimport { compose } from '../../utils';\r\nimport { bindActionCreators } from \"redux\";\r\nimport Spinner from \"../spinner\";\r\nimport './book-list.css';\r\nimport ErrorIndicator from \"../error-indicator/error-indicator\";\r\n\r\nconst BookList = ({ books, onAddedToCart }) => {\r\n  return (\r\n      <ul className=\"book-list\">\r\n        {\r\n          books.map((book) => {\r\n            return (\r\n            <li key={ book.id }>\r\n              <BookListItem book={ book }\r\n                            onAddedToCart={() => onAddedToCart(book.id)}/>\r\n            </li>\r\n            )\r\n          })\r\n        }\r\n      </ul>\r\n  )\r\n};\r\n\r\nclass BookListContainer extends Component {\r\n\r\n  componentDidMount() {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, loading, error, onAddedToCart } = this.props;\r\n\r\n    if (loading) {\r\n      return <Spinner />\r\n    }\r\n\r\n    if (error) {\r\n      return <ErrorIndicator />\r\n    }\r\n\r\n    return <BookList books={ books } onAddedToCart={onAddedToCart}/>\r\n\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\r\n  return { books, loading, error }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  const { bookstoreService } = ownProps;\r\n  return bindActionCreators({\r\n    fetchBooks: fetchBooks(bookstoreService),\r\n    onAddedToCart: bookAddedToCart\r\n  }, dispatch);\r\n};\r\n\r\nexport default compose(\r\n                withBookstoreService(),\r\n                connect(mapStateToProps, mapDispatchToProps)\r\n                )(BookListContainer);\r\n","import BookList from \"./book-list\";\r\n\r\nexport default BookList;\r\n","import React from \"react\";\r\nimport BookList from \"../book-list\";\r\n\r\nconst HomePage = () => {\r\n\r\n  return (\r\n      <BookList />\r\n  )\r\n};\r\n\r\nexport default HomePage;\r\n","import React from \"react\";\r\n\r\nconst CardPage = () => {\r\n  return (\r\n      <div>\r\n        Card page\r\n      </div>\r\n  )\r\n};\r\n\r\nexport default CardPage;\r\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport './shopping-cart-table.css';\nimport { bookAddedToCart, bookRemoveFromCart, AllBooksRemovedFromCart } from \"../../actions\";\n\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete}) => {\n\n  const renderRow = (item, idx) => {\n    const { id, title, count, total } = item;\n    return (\n        <tr key={ id }>\n          <td> { idx + 1 }</td>\n          <td>{ title }</td>\n          <td>{ count }</td>\n          <td>$ { total }</td>\n          <td>\n            <button onClick={() => onDelete(id)} className=\"btn btn-outline-danger btn-sm float-right\">\n              <i className=\"fa fa-trash-o\" />\n            </button>\n            <button onClick={() => onIncrease(id)} className=\"btn btn-outline-success btn-sm float-right\">\n              <i className=\"fa fa-plus-circle\" />\n            </button>\n            <button onClick={() => onDecrease(id)} className=\"btn btn-outline-warning btn-sm float-right\">\n              <i className=\"fa fa-minus-circle\" />\n            </button>\n          </td>\n        </tr>\n    )\n  };\n\n  return (\n    <div className=\"shopping-cart-table\">\n      <h2>Your Order</h2>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Total</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n\n        <tbody>\n        {\n          items.map(renderRow)\n        }\n        </tbody>\n      </table>\n\n      <div className=\"total\">\n        Total: $ { total }\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  return {\n    items: cartItems,\n    total: orderTotal\n  }\n};\n\nconst mapDispatchToProps = {\n    onIncrease: bookAddedToCart,\n    onDecrease: bookRemoveFromCart,\n    onDelete: AllBooksRemovedFromCart\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\n","import ShoppingCartTable from './shopping-cart-table';\n\nexport default ShoppingCartTable;\n","import App from './app';\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\n\r\nimport './app.css';\r\nimport ShopHeader from \"../shop-header\";\r\nimport { HomePage, CardPage } from '../pages';\r\nimport ShoppingCartTable from \"../shopping-cart-table\";\r\nconst App = () => {\r\n\r\n  return (\r\n      <main role=\"main\" className=\"container\">\r\n        <ShopHeader />\r\n        <Switch>\r\n          <Route path=\"/\" component={ HomePage } exact />\r\n          <Route path=\"/cart\" component={ CardPage } />\r\n        </Switch>\r\n        <ShoppingCartTable />\r\n      </main>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import ErrorBoundry from \"./error-boundry\";\r\n\r\nexport default ErrorBoundry;\r\n","import React, { Component } from \"react\";\r\n\r\nimport ErrorIndicator from \"../error-indicator/error-indicator\";\r\n\r\nexport default class ErrorBoundry extends Component {\r\n\r\n  state = {\r\n    hasError: false\r\n  };\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    this.setState({hasError: true})\r\n  }\r\n\r\n  render() {\r\n\r\n    const { hasError} = this.state;\r\n\r\n    if (hasError) {\r\n      return <ErrorIndicator />\r\n    }\r\n\r\n    return (\r\n      this.props.children\r\n    )\r\n  }\r\n\r\n}\r\n\r\n","\r\nexport default class BookstoreService {\r\n\r\n  data = [\r\n    {\r\n      id: 1,\r\n      title: 'Production-Ready Microservices',\r\n      author: 'Susan J. Fowler',\r\n      price: 32,\r\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'},\r\n    {\r\n      id: 2,\r\n      title: 'Release It!',\r\n      author: 'Michael T. Nygard',\r\n      price: 45,\r\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'}\r\n  ];\r\n\r\n  getBooks() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        resolve(this.data);\r\n      }, 700);\r\n    })\r\n  }\r\n}\r\n","\r\nconst updateBookList = (state, action) => {\r\n\r\n  if (state === undefined) {\r\n    return {\r\n      books: [],\r\n      loading: true,\r\n      error: null,\r\n    }\r\n  }\r\n\r\n  switch (action.type) {\r\n    case 'FETCH_BOOKS_REQUEST':\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null\r\n      };\r\n\r\n    case 'FETCH_BOOKS_SUCCESS':\r\n      return {\r\n        books: action.payload,\r\n        loading: false,\r\n        error: null\r\n      };\r\n\r\n    case 'FETCH_BOOKS_FAILURE':\r\n      return {\r\n        books: [],\r\n        loading: false,\r\n        error: action.payload\r\n      };\r\n\r\n    default:\r\n      return state.bookList;\r\n  }\r\n};\r\n\r\nexport default updateBookList;\r\n","const updateCartItems = (cartItems, item, index) => {\r\n\r\n  if (item.count === 0) {\r\n    return [\r\n      ...cartItems.slice(0, index),\r\n      ...cartItems.slice(index + 1)\r\n    ]\r\n  }\r\n\r\n  if (index === -1) {\r\n    return [\r\n      ...cartItems,\r\n      item\r\n    ]\r\n  }\r\n\r\n  return [\r\n    ...cartItems.slice(0, index),\r\n    item,\r\n    ...cartItems.slice(index + 1)\r\n  ]\r\n};\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n\r\n  const {\r\n    id = book.id,\r\n    count = 0,\r\n    title = book.title,\r\n    total = 0 } = item;\r\n\r\n  return {\r\n    id,\r\n    title,\r\n    count: count + quantity,\r\n    total: total + quantity*book.price\r\n  }\r\n};\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n\r\n  const { bookList: { books }, shoppingCart: { cartItems } } = state;\r\n  const book = books.find((book) => book.id === bookId);\r\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\r\n  const item = cartItems[itemIndex];\r\n\r\n  const newItem = updateCartItem(book, item, quantity);\r\n\r\n  const newArray = updateCartItems(cartItems, newItem, itemIndex);\r\n  const newTotal = newArray.reduce(function (previousValue, item) {\r\n    return previousValue + item.total;\r\n  }, 0);\r\n\r\n  const newItemsTotal = newArray.reduce(function (previousValue, item) {\r\n    return previousValue + item.count;\r\n  }, 0);\r\n\r\n  return {\r\n    cartItems: newArray,\r\n    orderTotal: newTotal,\r\n    itemsTotal: newItemsTotal\r\n  };\r\n};\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n\r\n  if (state === undefined) {\r\n    return {\r\n      cartItems: [],\r\n      orderTotal: 0,\r\n      itemsTotal: 0\r\n    }\r\n  }\r\n\r\n  switch (action.type) {\r\n    case 'BOOK_ADDED_TO_CART':\r\n      return updateOrder(state, action.payload, 1);\r\n\r\n    case 'BOOK_REMOVED_FROM_CAT':\r\n      return updateOrder(state, action.payload, -1);\r\n\r\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n      const item = state.shoppingCart.cartItems.find(({ id }) => id === action.payload);\r\n      return updateOrder(state, action.payload, -item.count);\r\n\r\n    default:\r\n      return state.shoppingCart;\r\n  }\r\n};\r\n\r\nexport default updateShoppingCart;\r\n","\r\nimport updateBookList from \"./book-list\";\r\nimport updateShoppingCart from './shopping-cart';\r\n\r\nconst reducer = (state, action) => {\r\n\r\n    return {\r\n      bookList: updateBookList(state, action),\r\n      shoppingCart: updateShoppingCart(state, action)\r\n    };\r\n};\r\n\r\nexport default reducer;\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport thunkMiddleware from 'redux-thunk';\r\n\r\nimport reducer from \"./reducers\";\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunkMiddleware));\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\n\r\nimport App from './components/app';\r\nimport ErrorBoundry from \"./components/error-boundry\";\r\nimport BookstoreService from \"./services/bookstore-service\";\r\nimport { BookstoreServiceProvider } from \"./components/bookstore-service-context\";\r\n\r\nimport store from \"./store\";\r\n\r\nconst bookstoreService = new BookstoreService();\r\n\r\nReactDOM.render(\r\n    <Provider store={ store }>\r\n      <ErrorBoundry>\r\n        <BookstoreServiceProvider value={ bookstoreService }>\r\n          <Router>\r\n            <App />\r\n          </Router>\r\n        </BookstoreServiceProvider>\r\n      </ErrorBoundry>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}